# Feature: [TECH-026] Internationalize Hooks to English

**Status:** done | **Priority:** P2 | **Date:** 2026-01-26

## Why

Hooks contain Russian keywords in `prompt_guard.py`. This limits international adoption — non-Russian speakers can't understand or customize the patterns.

## Context

Files with Russian text:
- `.claude/hooks/prompt_guard.py` — Russian keywords in COMPLEXITY_PATTERNS (lines 23-24)

Files already English-only:
- `pre_edit.py` — all messages in English
- `pre_bash.py` — all messages in English
- `post_edit.py` — all messages in English
- `utils.py` — all docstrings in English

---

## Scope

**In scope:**
- Remove Russian patterns from prompt_guard.py
- Keep English patterns only (they cover same cases)

**Out of scope:**
- Adding new patterns
- Changing hook logic
- Other files

---

## Impact Tree Analysis

### Step 1: UP — who uses?
- prompt_guard.py is called by Claude Code UserPromptSubmit hook
- No other files import it

### Step 2: BY TERM — grep project
```bash
grep -r "добавь\|создай\|сделай" . --include="*.py"
```
Only in prompt_guard.py

### Verification
- [x] All affected files identified

---

## Allowed Files

**ONLY these files may be modified:**
1. `.claude/hooks/prompt_guard.py` — remove Russian patterns

**FORBIDDEN:** All other files.

---

## Environment

nodejs: false
docker: false
database: false

---

## Design

### Current COMPLEXITY_PATTERNS (lines 21-35):
```python
COMPLEXITY_PATTERNS = [
    # Russian keywords + target
    r"\b(добавь|создай|сделай|реализуй|напиши)\b.{0,30}\b(фич|функци|endpoint|api|сервис|handler|middleware)",
    r"\bновая?\s+(фича|функция|feature|фичу)",
    # English keywords + target
    r"\b(implement|create|build|add|write)\b.{0,30}\b(feature|function|endpoint|api|service|handler)",
    r"\bnew\s+(feature|functionality)",
    # Direct code requests (Russian)
    r"\bнапиши\s+(функцию|класс|метод|код|скрипт)",
    r"\bсделай\s+(endpoint|api|handler|сервис)",
    r"\bдобавь\s+(api|endpoint|метод|функцию)",
    # Direct code requests (English)
    r"\bwrite\s+(a\s+)?(function|class|method|code|script)",
    r"\bcreate\s+(a\s+)?(endpoint|api|handler|service)",
]
```

### New COMPLEXITY_PATTERNS (English only):
```python
COMPLEXITY_PATTERNS = [
    # Keywords + target
    r"\b(implement|create|build|add|write)\b.{0,30}\b(feature|function|endpoint|api|service|handler|middleware)",
    r"\bnew\s+(feature|functionality)",
    # Direct code requests
    r"\bwrite\s+(a\s+)?(function|class|method|code|script)",
    r"\bcreate\s+(a\s+)?(endpoint|api|handler|service)",
    r"\badd\s+(a\s+)?(endpoint|api|method|function)",
    r"\bbuild\s+(a\s+)?(service|handler|middleware)",
]
```

**Note:** Added `middleware` to first pattern and expanded English patterns to cover same breadth as removed Russian ones.

---

## Implementation Plan

### Task 1: Remove Russian patterns from prompt_guard.py
**Type:** edit
**Files:** modify `.claude/hooks/prompt_guard.py`
**Acceptance:**
- [ ] No Russian text in file
- [ ] English patterns cover same use cases
- [ ] Hook still triggers on complex requests

---

## Definition of Done

### Functional
- [ ] All Russian text removed from hooks
- [ ] English patterns work correctly

### Technical
- [ ] ruff format passes
- [ ] No syntax errors
